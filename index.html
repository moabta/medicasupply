<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>داشبورد سلاسل الإمداد بالتجمع الصحي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap');
        
        :root {
            --primary-color: #0e4c8b;
            --secondary-color: #10a1dc;
            --success-color: #3cb371;
            --warning-color: #ffa500;
            --danger-color: #dc3545;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --border-color: #dee2e6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #444;
        }
        
        .container {
            width: 100%;
            padding: 20px;
        }
        
        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .header h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .header img {
            height: 60px;
        }
        
        /* Navigation */
        .nav {
            display: flex;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .nav-item {
            padding: 15px 20px;
            text-align: center;
            flex: 1;
            cursor: pointer;
            transition: background-color 0.3s;
            color: var(--dark-color);
            font-weight: 500;
            border-left: 1px solid var(--border-color);
        }
        
        .nav-item:last-child {
            border-left: none;
        }
        
        .nav-item.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .nav-item:hover:not(.active) {
            background-color: var(--light-color);
        }
        
        /* Stats */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background-color: var(--primary-color);
        }
        
        .stat-card h3 {
            font-size: 1rem;
            color: var(--dark-color);
            margin-bottom: 15px;
        }
        
        .stat-card .value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .stat-card .icon {
            font-size: 1.2rem;
            margin-left: 5px;
            color: var(--success-color);
        }
        
        /* Charts Container */
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .chart-card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 20px;
            height: 100%;
        }
        
        .chart-card h3 {
            font-size: 1.1rem;
            color: var(--dark-color);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .chart-container {
            width: 100%;
            height: 300px;
            position: relative;
        }
        
        /* Table */
        .table-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .table-container h3 {
            font-size: 1.1rem;
            color: var(--dark-color);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: right;
            border-bottom: 1px solid var(--border-color);
        }
        
        th {
            background-color: var(--light-color);
            font-weight: 500;
        }
        
        tbody tr:hover {
            background-color: rgba(14, 76, 139, 0.05);
        }
        
        /* Status indicators */
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .status-success {
            background-color: rgba(60, 179, 113, 0.2);
            color: var(--success-color);
        }
        
        .status-warning {
            background-color: rgba(255, 165, 0, 0.2);
            color: var(--warning-color);
        }
        
        .status-danger {
            background-color: rgba(220, 53, 69, 0.2);
            color: var(--danger-color);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .charts-container {
                grid-template-columns: 1fr;
            }
            
            .nav {
                flex-wrap: wrap;
            }
            
            .nav-item {
                flex-basis: 50%;
                border-bottom: 1px solid var(--border-color);
            }
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }

        /* Legend */
        .chart-legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px 10px;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            margin-left: 5px;
            border-radius: 3px;
        }
        
        /* Gauges */
        .gauge-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .gauge {
            width: 150px;
            height: 150px;
            position: relative;
            margin: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Footer */
        .footer {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .footer p {
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>سلاسل الإمداد بالتجمع الصحي</h1>
            <img src="/api/placeholder/200/80" alt="شعار تجمع المدينة المنورة الصحي">
        </div>
        
        <!-- Navigation -->
        <div class="nav">
            <div class="nav-item active" data-tab="overview">نظرة عامة</div>
            <div class="nav-item" data-tab="inventory">المخزون</div>
            <div class="nav-item" data-tab="contracts">العقود</div>
            <div class="nav-item" data-tab="performance">الأداء</div>
            <div class="nav-item" data-tab="tickets">التذاكر</div>
        </div>
        
        <!-- Overview Tab -->
        <div class="tab-content active" id="overview">
            <!-- Stats -->
            <div class="stats-container">
                <div class="stat-card">
                    <h3>إجمالي عدد العقود النشطة</h3>
                    <div class="value">60 <span class="icon"><i class="fas fa-file-contract"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>مشتريات الشراء المباشر</h3>
                    <div class="value">91,983,654 <span class="icon"><i class="fas fa-money-bill-wave"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>إجمالي عدد التعاميد</h3>
                    <div class="value">488 <span class="icon"><i class="fas fa-clipboard-list"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>نسبة الطلبات المستوفاة</h3>
                    <div class="value">98% <span class="icon"><i class="fas fa-check-circle"></i></span></div>
                </div>
            </div>
            
            <!-- Charts -->
            <div class="charts-container">
                <div class="chart-card">
                    <h3>توفر المخزون</h3>
                    <div class="chart-container">
                        <canvas id="availabilityChart"></canvas>
                    </div>
                    <div class="chart-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #0e4c8b;"></div>
                            <span>المخزون العام</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #dc3545;"></div>
                            <span>الأدوية الأساسية</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #3cb371;"></div>
                            <span>المستلزمات الأساسية</span>
                        </div>
                    </div>
                </div>
                <div class="chart-card">
                    <h3>حالة التخطيط للبنود الطبية</h3>
                    <div class="chart-container">
                        <canvas id="planningChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="charts-container">
                <div class="chart-card">
                    <h3>معدل دوران المخزون</h3>
                    <div class="chart-container">
                        <canvas id="turnoverChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <h3>نسبة الطلبات المستوفاة 2024</h3>
                    <div class="chart-container">
                        <canvas id="fillRateChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Gauges -->
            <div class="chart-card">
                <h3>مؤشرات الأداء الرئيسية</h3>
                <div class="gauge-container">
                    <div class="gauge">
                        <h4>نسبة الطلبات المستوفاة</h4>
                        <canvas id="fillRateGauge"></canvas>
                    </div>
                    <div class="gauge">
                        <h4>نسبة الطلبات النافذة من المخزون</h4>
                        <canvas id="stockoutGauge"></canvas>
                    </div>
                    <div class="gauge">
                        <h4>نسبة إغلاق التذاكر</h4>
                        <canvas id="openTicketsGauge"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Inventory Tab -->
        <div class="tab-content" id="inventory">
            <div class="stats-container">
                <div class="stat-card">
                    <h3>إجمالي عدد البنود</h3>
                    <div class="value">15,535 <span class="icon"><i class="fas fa-boxes"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>بنود غير مرسى</h3>
                    <div class="value">5,777 <span class="icon"><i class="fas fa-exclamation-triangle"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>بنود مرسى</h3>
                    <div class="value">9,758 <span class="icon"><i class="fas fa-check"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>بنود متعثرة</h3>
                    <div class="value">1,185 <span class="icon"><i class="fas fa-times-circle"></i></span></div>
                </div>
            </div>
            
            <div class="chart-card">
                <h3>تقرير حالة العقود النشطة</h3>
                <div class="chart-container">
                    <canvas id="contractStatusChart"></canvas>
                </div>
            </div>
            
            <div class="table-container">
                <h3>حالة التخطيط للبنود الطبية</h3>
                <table>
                    <thead>
                        <tr>
                            <th>التصنيف</th>
                            <th>PHARMA (Central)</th>
                            <th>PHARMA</th>
                            <th>Medical Supplies</th>
                            <th>LAB</th>
                            <th>الإجمالي</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>صفري</td>
                            <td>1086</td>
                            <td>1161</td>
                            <td>261</td>
                            <td>46</td>
                            <td>2554</td>
                        </tr>
                        <tr>
                            <td>عدم احتياج</td>
                            <td>260</td>
                            <td>198</td>
                            <td>19</td>
                            <td>36</td>
                            <td>513</td>
                        </tr>
                        <tr>
                            <td>فائض</td>
                            <td>243</td>
                            <td>1096</td>
                            <td>247</td>
                            <td>4</td>
                            <td>1590</td>
                        </tr>
                        <tr>
                            <td>قريب النفاذ</td>
                            <td>156</td>
                            <td>327</td>
                            <td>127</td>
                            <td>16</td>
                            <td>626</td>
                        </tr>
                        <tr>
                            <td>لا يوجد تنبؤ</td>
                            <td>1</td>
                            <td>148</td>
                            <td>175</td>
                            <td>78</td>
                            <td>402</td>
                        </tr>
                        <tr>
                            <td>مثالي</td>
                            <td>415</td>
                            <td>917</td>
                            <td>331</td>
                            <td>28</td>
                            <td>1691</td>
                        </tr>
                        <tr>
                            <td>منخفض</td>
                            <td>220</td>
                            <td>512</td>
                            <td>169</td>
                            <td>28</td>
                            <td>929</td>
                        </tr>
                        <tr>
                            <td><strong>الإجمالي</strong></td>
                            <td><strong>2528</strong></td>
                            <td><strong>4353</strong></td>
                            <td><strong>1218</strong></td>
                            <td><strong>157</strong></td>
                            <td><strong>8257</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Contracts Tab -->
        <div class="tab-content" id="contracts">
            <div class="stats-container">
                <div class="stat-card">
                    <h3>إجمالي عدد العقود</h3>
                    <div class="value">67 <span class="icon"><i class="fas fa-file-contract"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>عدد العقود السارية</h3>
                    <div class="value">41 <span class="icon"><i class="fas fa-check-circle"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>عدد العقود المنتهية</h3>
                    <div class="value">26 <span class="icon"><i class="fas fa-calendar-times"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>نسبة توريد العقود</h3>
                    <div class="value">49.41% <span class="icon"><i class="fas fa-truck-loading"></i></span></div>
                </div>
            </div>
            
            <div class="chart-card">
                <h3>بيانات العقود الوزارية</h3>
                <div class="chart-container">
                    <canvas id="ministryContractsChart"></canvas>
                </div>
            </div>
            
            <div class="chart-card">
                <h3>مؤشر طلبات الشراء المباشر لعام 2024</h3>
                <div class="chart-container">
                    <canvas id="directPurchaseChart"></canvas>
                </div>
                <p style="text-align: center; margin-top: 10px;">إجمالي القيمة: <strong>222,221,497.4 ريال</strong></p>
            </div>
            
            <div class="table-container">
                <h3>الجهات الصادرة للطلبات 2024</h3>
                <table>
                    <thead>
                        <tr>
                            <th>الجهة</th>
                            <th>عدد الطلبات</th>
                            <th>عدد البنود</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>سلاسل الإمداد</td>
                            <td>466</td>
                            <td>774</td>
                        </tr>
                        <tr>
                            <td>مدينة الملك سلمان</td>
                            <td>268</td>
                            <td>407</td>
                        </tr>
                        <tr>
                            <td>مركز القلب</td>
                            <td>122</td>
                            <td>266</td>
                        </tr>
                        <tr>
                            <td>الملك فهد</td>
                            <td>91</td>
                            <td>124</td>
                        </tr>
                        <tr>
                            <td>أحد</td>
                            <td>65</td>
                            <td>126</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Performance Tab -->
        <div class="tab-content" id="performance">
            <div class="stats-container">
                <div class="stat-card">
                    <h3>نسبة الطلبات المستوفاة</h3>
                    <div class="value">98% <span class="icon"><i class="fas fa-check-circle"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>معدل دوران المخزون</h3>
                    <div class="value">0.21 <span class="icon"><i class="fas fa-sync"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>نسبة الطلبات النافذة</h3>
                    <div class="value">2% <span class="icon"><i class="fas fa-times-circle"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>توفر المخزون الأساسي</h3>
                    <div class="value">87.5% <span class="icon"><i class="fas fa-cubes"></i></span></div>
                </div>
            </div>
            
            <div class="charts-container">
                <div class="chart-card">
                    <h3>توفر البنود خارج المخزون</h3>
                    <div class="chart-container">
                        <canvas id="itemsOutOfStockChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <h3>مؤشرات الأداء الرئيسية</h3>
                    <div class="chart-container">
                        <canvas id="kpiChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="table-container">
                <h3>أداء سلاسل الإمداد</h3>
                <table>
                    <thead>
                        <tr>
                            <th>المؤشر</th>
                            <th>يناير</th>
                            <th>فبراير</th>
                            <th>مارس</th>
                            <th>أبريل</th>
                            <th>مايو</th>
                            <th>يونيو</th>
                            <th>يوليو</th>
                            <th>أغسطس</th>
                            <th>سبتمبر</th>
                            <th>أكتوبر</th>
                            <th>نوفمبر</th>
                            <th>ديسمبر</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>نسبة الطلبات المستوفاة</td>
                            <td>99%</td>
                            <td>95%</td>
                            <td>99%</td>
                            <td>99%</td>
                            <td>99%</td>
                            <td>98%</td>
                            <td>98%</td>
                            <td>97%</td>
                            <td>98%</td>
                            <td>98%</td>
                            <td>98%</td>
                            <td>87%</td>
                        </tr>
                        <tr>
                            <td>معدل دوران المخزون</td>
                            <td>0.14</td>
                            <td>0.26</td>
                            <td>0.28</td>
                            <td>0.31</td>
                            <td>0.36</td>
                            <td>0.30</td>
                            <td>0.11</td>
                            <td>0.10</td>
                            <td>0.13</td>
                            <td>0.13</td>
                            <td>0.21</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>نسبة الطلبات النافذة</td>
                            <td>1%</td>
                            <td>5%</td>
                            <td>1%</td>
                            <td>1%</td>
                            <td>1%</td>
                            <td>2%</td>
                            <td>2%</td>
                            <td>3%</td>
                            <td>2%</td>
                            <td>2%</td>
                            <td>2%</td>
                            <td>13%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Tickets Tab -->
        <div class="tab-content" id="tickets">
            <div class="stats-container">
                <div class="stat-card">
                    <h3>إجمالي عدد التذاكر</h3>
                    <div class="value">13,551 <span class="icon"><i class="fas fa-ticket-alt"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>تذاكر مفتوحة</h3>
                    <div class="value">1,262 <span class="icon"><i class="fas fa-door-open"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>تذاكر معاد فتحها</h3>
                    <div class="value">1,252 <span class="icon"><i class="fas fa-redo"></i></span></div>
                </div>
                <div class="stat-card">
                    <h3>تذاكر مغلقة</h3>
                    <div class="value">11,003 <span class="icon"><i class="fas fa-check-double"></i></span></div>
                </div>
            </div>
            
            <div class="chart-card">
                <h3>إحصائيات منصة NHCC خلال عام 2024</h3>
                <div class="chart-container">
                    <canvas id="ticketsChart"></canvas>
                </div>
            </div>
            
            <div class="charts-container">
                <div class="chart-card">
                    <h3>عمليات سلاسل الإمداد</h3>
                    <div class="chart-container">
                        <canvas id="supplyChainOpsChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <h3>نسبة إغلاق التذاكر</h3>
                    <div class="chart-container">
                        <canvas id="ticketsCloseRateChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="table-container">
                <h3>توزيع عمليات سلاسل الإمداد (2024-2025)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>الحالة</th>
                            <th>2024</th>
                            <th>2025</th>
                            <th>الإجمالي</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>مغلقة</td>
                            <td>976</td>
                            <td>14</td>
                            <td>990</td>
                        </tr>
                        <tr>
                            <td>مفتوحة</td>
                            <td>72</td>
                            <td>76</td>
                            <td>148</td>
                        </tr>
                        <tr>
                            <td><strong>الإجمالي</strong></td>
                            <td><strong>1048</strong></td>
                            <td><strong>90</strong></td>
                            <td><strong>1138</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p>© مركز تميز سلاسل الإمداد بتجمع المدينة الصحي 2024</p>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        // Tab Navigation
        document.addEventListener('DOMContentLoaded', function() {
            const navItems = document.querySelectorAll('.nav-item');
            const tabContents = document.querySelectorAll('.tab-content');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remove active class from all nav items
                    navItems.forEach(nav => nav.classList.remove('active'));
                    
                    // Add active class to clicked nav item
                    this.classList.add('active');
                    
                    // Hide all tab contents
                    tabContents.forEach(tab => tab.classList.remove('active'));
                    
                    // Show the corresponding tab content
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Initialize Charts
            initializeCharts();
        });
        
        function initializeCharts() {
            // Availability Chart (Line chart)
            const availabilityCtx = document.getElementById('availabilityChart').getContext('2d');
            const availabilityChart = new Chart(availabilityCtx, {
                type: 'line',
                data: {
                    labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'],
                    datasets: [
                        {
                            label: 'المخزون العام',
                            data: [50, 41, 36, 35, 31, 33, 28, 25, 20, 17, 18, 22],
                            borderColor: '#0e4c8b',
                            backgroundColor: 'rgba(14, 76, 139, 0.1)',
                            tension: 0.3,
                            pointRadius: 4,
                            pointBackgroundColor: '#0e4c8b'
                        },
                        {
                            label: 'الأدوية الأساسية',
                            data: [40, 32.23, 33.77, 30.34, 24.32, 25.39, 20.40, 20.17, 12.54, 10.45, 12.14, 14.63],
                            borderColor: '#dc3545',
                            backgroundColor: 'rgba(220, 53, 69, 0.1)',
                            tension: 0.3,
                            pointRadius: 4,
                            pointBackgroundColor: '#dc3545'
                        },
                        {
                            label: 'المستلزمات الأساسية',
                            data: [57, 48, 37, 39, 37, 39, 33, 28, 26, 22, 23, 28],
                            borderColor: '#3cb371',
                            backgroundColor: 'rgba(60, 179, 113, 0.1)',
                            tension: 0.3,
                            pointRadius: 4,
                            pointBackgroundColor: '#3cb371'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'النسبة المئوية (%)'
                            }
                        }
                    }
                }
            });
            
            // Planning Chart (Bar chart)
            const planningCtx = document.getElementById('planningChart').getContext('2d');
            const planningChart = new Chart(planningCtx, {
                type: 'bar',
                data: {
                    labels: ['صفري', 'عدم احتياج', 'فائض', 'قريب النفاذ', 'لا يوجد تنبؤ', 'مثالي', 'منخفض'],
                    datasets: [
                        {
                            label: 'PHARMA (Central)',
                            data: [1086, 260, 243, 156, 1, 415, 220],
                            backgroundColor: 'rgba(14, 76, 139, 0.7)'
                        },
                        {
                            label: 'PHARMA',
                            data: [1161, 198, 1096, 327, 148, 917, 512],
                            backgroundColor: 'rgba(60, 179, 113, 0.7)'
                        },
                        {
                            label: 'Medical Supplies',
                            data: [261, 19, 247, 127, 175, 331, 169],
                            backgroundColor: 'rgba(255, 165, 0, 0.7)'
                        },
                        {
                            label: 'LAB',
                            data: [46, 36, 4, 16, 78, 28, 28],
                            backgroundColor: 'rgba(220, 53, 69, 0.7)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        x: {
                            stacked: true
                        },
                        y: {
                            stacked: true,
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'عدد البنود'
                            }
                        }
                    }
                }
            });
            
            // Turnover Chart (Line chart)
            const turnoverCtx = document.getElementById('turnoverChart').getContext('2d');
            const turnoverChart = new Chart(turnoverCtx, {
                type: 'line',
                data: {
                    labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر'],
                    datasets: [
                        {
                            label: 'معدل دوران المخزون',
                            data: [0.14, 0.26, 0.28, 0.31, 0.36, 0.30, 0.11, 0.10, 0.13, 0.13, 0.21],
                            borderColor: '#3cb371',
                            backgroundColor: 'rgba(60, 179, 113, 0.1)',
                            tension: 0.3,
                            pointRadius: 5,
                            pointBackgroundColor: '#3cb371',
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'معدل دوران المخزون: ' + context.raw;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 0.5,
                            title: {
                                display: true,
                                text: 'المعدل'
                            }
                        }
                    }
                }
            });
            
            // Fill Rate Chart (Line chart)
            const fillRateCtx = document.getElementById('fillRateChart').getContext('2d');
            const fillRateChart = new Chart(fillRateCtx, {
                type: 'line',
                data: {
                    labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'],
                    datasets: [
                        {
                            label: 'نسبة الطلبات المستوفاة',
                            data: [99, 95, 99, 99, 99, 98, 98, 97, 98, 98, 98, 87],
                            borderColor: '#0e4c8b',
                            backgroundColor: 'rgba(14, 76, 139, 0.1)',
                            tension: 0.1,
                            pointRadius: 5,
                            pointBackgroundColor: '#0e4c8b',
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'نسبة الطلبات المستوفاة: ' + context.raw + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'النسبة المئوية (%)'
                            }
                        }
                    }
                }
            });
            
            // Contract Status Chart (Pie chart)
            const contractStatusCtx = document.getElementById('contractStatusChart').getContext('2d');
            const contractStatusChart = new Chart(contractStatusCtx, {
                type: 'pie',
                data: {
                    labels: ['بنود غير مرسى', 'بنود مرسى', 'عقد منتهي', 'بند متعثر', 'تم استلام كامل الكمية'],
                    datasets: [
                        {
                            data: [5777, 9758, 6155, 1185, 2241],
                            backgroundColor: [
                                '#10a1dc',
                                '#3cb371',
                                '#ffc107',
                                '#dc3545',
                                '#6f42c1'
                            ],
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((acc, val) => acc + val, 0);
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return `${label}: ${value} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
            
            // Ministry Contracts Chart (Bar chart)
            const ministryContractsCtx = document.getElementById('ministryContractsChart').getContext('2d');
            const ministryContractsChart = new Chart(ministryContractsCtx, {
                type: 'bar',
                data: {
                    labels: ['إجمالي عدد العقود', 'إجمالي عدد البنود', 'نسبة توريد العقود (%)', 'عدد البنود المتعثرة'],
                    datasets: [
                        {
                            data: [67, 9758, 49.41, 1185],
                            backgroundColor: [
                                'rgba(14, 76, 139, 0.7)',
                                'rgba(16, 161, 220, 0.7)',
                                'rgba(60, 179, 113, 0.7)',
                                'rgba(220, 53, 69, 0.7)'
                            ],
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 10000
                        }
                    }
                }
            });
            
            // Direct Purchase Chart (Doughnut chart)
            const directPurchaseCtx = document.getElementById('directPurchaseChart').getContext('2d');
            const directPurchaseChart = new Chart(directPurchaseCtx, {
                type: 'doughnut',
                data: {
                    labels: ['تم التوريد', 'لم يتم التوريد'],
                    datasets: [
                        {
                            data: [861, 151],
                            backgroundColor: [
                                'rgba(60, 179, 113, 0.7)',
                                'rgba(220, 53, 69, 0.7)'
                            ],
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((acc, val) => acc + val, 0);
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return `${label}: ${value} بند (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
            
            // Items Out of Stock Chart (Line chart)
            const itemsOutOfStockCtx = document.getElementById('itemsOutOfStockChart').getContext('2d');
            const itemsOutOfStockChart = new Chart(itemsOutOfStockCtx, {
                type: 'line',
                data: {
                    labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'],
                    datasets: [
                        {
                            label: 'المخزون العام',
                            data: [50, 41, 36, 35, 31, 33, 28, 25, 20, 17, 18, 22],
                            borderColor: '#0e4c8b',
                            backgroundColor: 'transparent',
                            tension: 0.3,
                            pointRadius: 4,
                            pointBackgroundColor: '#0e4c8b'
                        },
                        {
                            label: 'الأدوية الأساسية',
                            data: [40, 32.23, 33.77, 30.34, 24.32, 25.39, 20.40, 20.17, 12.54, 10.45, 12.14, 14.63],
                            borderColor: '#dc3545',
                            backgroundColor: 'transparent',
                            tension: 0.3,
                            pointRadius: 4,
                            pointBackgroundColor: '#dc3545'
                        },
                        {
                            label: 'المستلزمات الأساسية',
                            data: [57, 48, 37, 39, 37, 39, 33, 28, 26, 22, 23, 28],
                            borderColor: '#3cb371',
                            backgroundColor: 'transparent',
                            tension: 0.3,
                            pointRadius: 4,
                            pointBackgroundColor: '#3cb371'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'النسبة المئوية (%)'
                            }
                        }
                    }
                }
            });
            
            // KPI Chart (Radar chart)
            const kpiCtx = document.getElementById('kpiChart').getContext('2d');
            const kpiChart = new Chart(kpiCtx, {
                type: 'radar',
                data: {
                    labels: [
                        'نسبة الطلبات المستوفاة',
                        'توفر المخزون العام',
                        'معدل دوران المخزون',
                        'توفر الأدوية الأساسية',
                        'توفر المستلزمات الأساسية',
                        'نسبة إغلاق التذاكر'
                    ],
                    datasets: [
                        {
                            label: 'الأداء الحالي',
                            data: [98, 78, 70, 88, 77, 90],
                            backgroundColor: 'rgba(14, 76, 139, 0.2)',
                            borderColor: '#0e4c8b',
                            pointBackgroundColor: '#0e4c8b',
                            pointRadius: 4
                        },
                        {
                            label: 'المستهدف',
                            data: [95, 85, 80, 90, 85, 95],
                            backgroundColor: 'rgba(60, 179, 113, 0.2)',
                            borderColor: '#3cb371',
                            pointBackgroundColor: '#3cb371',
                            pointRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            min: 0,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    }
                }
            });
            
            // Tickets Chart (Bar chart)
            const ticketsCtx = document.getElementById('ticketsChart').getContext('2d');
            const ticketsChart = new Chart(ticketsCtx, {
                type: 'bar',
                data: {
                    labels: ['مفتوحة', 'معاد فتحها', 'تم حلها', 'مغلقة', 'الإجمالي'],
                    datasets: [
                        {
                            data: [1262, 1252, 34, 11003, 13551],
                            backgroundColor: [
                                'rgba(255, 165, 0, 0.7)',
                                'rgba(220, 53, 69, 0.7)',
                                'rgba(60, 179, 113, 0.7)',
                                'rgba(14, 76, 139, 0.7)',
                                'rgba(111, 66, 193, 0.7)'
                            ],
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'عدد التذاكر'
                            }
                        }
                    }
                }
            });
            
            // Supply Chain Operations Chart (Pie chart)
            const supplyChainOpsCtx = document.getElementById('supplyChainOpsChart').getContext('2d');
            const supplyChainOpsChart = new Chart(supplyChainOpsCtx, {
                type: 'pie',
                data: {
                    labels: ['مغلقة', 'مفتوحة'],
                    datasets: [
                        {
                            data: [990, 148],
                            backgroundColor: [
                                'rgba(14, 76, 139, 0.7)',
                                'rgba(220, 53, 69, 0.7)'
                            ],
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((acc, val) => acc + val, 0);
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return `${label}: ${value} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
            
            // Tickets Close Rate Chart (Doughnut chart)
            const ticketsCloseRateCtx = document.getElementById('ticketsCloseRateChart').getContext('2d');
            const ticketsCloseRateChart = new Chart(ticketsCloseRateCtx, {
                type: 'doughnut',
                data: {
                    labels: ['مغلقة', 'معلقة'],
                    datasets: [
                        {
                            data: [937, 0],
                            backgroundColor: [
                                'rgba(60, 179, 113, 0.7)',
                                'rgba(220, 53, 69, 0.7)'
                            ],
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((acc, val) => acc + val, 0);
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return `${label}: ${value} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });

            // Gauge Chart Creation Function
            function createGaugeChart(canvasId, value, maxValue, title, colorRanges) {
                const canvas = document.getElementById(canvasId);
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                
                // Create gradient
                const gradientBlue = ctx.createLinearGradient(0, 0, 0, 150);
                gradientBlue.addColorStop(0, '#0e4c8b');
                gradientBlue.addColorStop(1, '#10a1dc');
                
                // Calculate percentage
                const percentage = (value / maxValue) * 100;
                
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        datasets: [{
                            data: [percentage, 100 - percentage],
                            backgroundColor: [
                                percentage < 50 ? '#dc3545' : percentage < 75 ? '#ffc107' : '#3cb371',
                                '#f5f5f5'
                            ],
                            borderWidth: 0,
                            circumference: 180,
                            rotation: 270
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        cutout: '70%',
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: false
                            }
                        }
                    },
                    plugins: [{
                        id: 'gaugeText',
                        afterDraw: (chart) => {
                            const { ctx, width, height } = chart;
                            ctx.save();
                            
                            // Draw percentage text
                            ctx.textAlign = 'center';
                            ctx.textBaseline = 'middle';
                            ctx.font = 'bold 20px Tajawal';
                            ctx.fillStyle = '#333';
                            ctx.fillText(`${percentage.toFixed(0)}%`, width / 2, height - 30);
                            
                            ctx.restore();
                        }
                    }]
                });
            }
            
            // Create gauge charts
            createGaugeChart('fillRateGauge', 98, 100);
            createGaugeChart('stockoutGauge', 98, 100);
            createGaugeChart('openTicketsGauge', 100, 100);
        }
    </script>
    